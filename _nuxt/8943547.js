(window.webpackJsonp=window.webpackJsonp||[]).push([[10,5],{278:function(t,e,o){"use strict";o.r(e);o(55);var n={name:"Alert",props:{message:{default:function(){return{}},type:Object}},data:function(){return{messages:[]}},watch:{message:function(){this.message.content&&this.addAlert()}},methods:{addAlert:function(){var t=this.message,style=t.style,e=t.icon,content=t.content;this.messages.push({style:style,icon:e,content:content}),this.removeAlert()},removeAlert:function(){var t=this;setTimeout((function(){t.messages.shift()}),6e3)}}},r=o(36),component=Object(r.a)(n,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",t._l(t.messages,(function(e,n){return o("div",{key:n,staticClass:"alert mb-6 my-2",class:"alert-"+e.style,attrs:{role:"alert"}},[o("p",{staticClass:"mb-0"},[o("i",{staticClass:"pe-1 fas",class:e.icon}),t._v(t._s(e.content))])])})),0)}),[],!1,null,null,null);e.default=component.exports},338:function(t,e,o){"use strict";o.r(e);o(39),o(47),o(37),o(94),o(17);var n=o(74),r=o(278),l={name:"UserEditInner",components:{ValidationObserver:n.a,ValidationProvider:n.b,Alert:r.default},props:{info:{default:function(){return{}},type:Object}},data:function(){return{user:{description:"",facebook_url:""},password:"",reset:{old_password:"",new_password:"",confirm_new_password:""},group:{individual_competition_id:1,position_id:1,email:""},individual_competitions:{},team_competition_positions:{},msg:{},modal:""}},watch:{info:{handler:function(){this.user.description=this.info.description?this.info.description:"",this.user.facebook_url=this.info.facebook_url?this.info.facebook_url:"",this.info.individual_competition&&("前端工程師"===this.info.individual_competition.name.split("/")[1]?this.group.individual_competition_id=2:this.group.individual_competition_id=1),this.info.team_competition&&("UI設計師"===this.info.team_competition.postition_name&&(this.group.position_id=1),"前端工程師"===this.info.team_competition.postition_name&&(this.group.position_id=2),"其他"===this.info.team_competition.postition_name&&(this.group.position_id=3))},deep:!0}},mounted:function(){this.getSignupGroup()},methods:{editUserInfo:function(){var t=this;this.$axios.put("/v1/users/info",this.user).then((function(){t.$emit("edit"),t.msg={style:"success",icon:"fa-check-circle",content:"已更新成功！"}})).catch((function(e){t.msg={style:"danger",icon:"fa-exclamation-triangle",content:e.response.data.message||"更新失敗！"}}))},editPassword:function(){var t=this;this.$axios.put("/v1/users/password",this.reset).then((function(){t.msg={style:"success",icon:"fa-check-circle",content:"已更新成功！"},t.reset=t.$options.data().reset,t.$nextTick((function(){t.$refs.observer.reset()}))})).catch((function(e){t.msg={style:"danger",icon:"fa-exclamation-triangle",content:e.response.data.message||"更新失敗！"}}))},getSignupGroup:function(){var t=this;this.$axios.get("/v1/dropdowns/signup-info").then((function(e){t.individual_competitions=e.data.individual_competitions,t.team_competition_positions=e.data.team_competition_positions})).catch((function(){}))}}},c=o(36),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"col-md-6"},[o("Alert",{attrs:{message:t.msg}}),t._v(" "),o("h1",{staticClass:"fs-4 text-black mb-5"},[t._v("編輯個人資料")]),t._v(" "),o("ul",{staticClass:"nav nav-tabs",attrs:{id:"myTab",role:"tablist"}},[t.info.team_competition?[o("li",{staticClass:"nav-item",attrs:{role:"presentation"}},[o("button",{staticClass:"nav-link",class:{active:t.info.team_competition},attrs:{id:"teamProfile-tab","data-bs-toggle":"tab","data-bs-target":"#teamProfile",type:"button",role:"tab","aria-controls":"teamProfile","aria-selected":"true"}},[t._v("\n          修改團體資料\n        ")])])]:t._e(),t._v(" "),o("li",{staticClass:"nav-item",attrs:{role:"presentation"}},[o("button",{staticClass:"nav-link",class:{active:!t.info.team_competition},attrs:{id:"profile-tab","data-bs-toggle":"tab","data-bs-target":"#profile",type:"button",role:"tab","aria-controls":"profile","aria-selected":"false"}},[t._v("\n        修改個人資料\n      ")])]),t._v(" "),t._m(0)],2),t._v(" "),o("div",{staticClass:"tab-content",attrs:{id:"myTabContent"}},[o("div",{staticClass:"tab-pane fade pt-5",class:{"show active":t.info.team_competition},attrs:{id:"teamProfile",role:"tabpanel","aria-labelledby":"teamProfile-tab"}},[o("ValidationObserver",[o("form",[t.info.team_competition?o("div",{staticClass:"mt-5"},[o("p",[t._v("團隊名稱："+t._s(t.info.team_competition.name))]),t._v(" "),t._l(t.info.team_competition.members,(function(e,n){return o("div",{key:"member"+n,staticClass:"mb-4"},[e.is_leader?o("div",[o("p",{staticClass:"mb-0"},[t._v("組長：")]),t._v(" "),e.nickname?o("p",{staticClass:"mb-0"},[o("a",{staticClass:"link-primary",attrs:{target:"_blank",href:"/users/"+e.user_id}},[t._v("\n                    "+t._s(e.nickname)+" / "+t._s(e.postition_name)+"\n                  ")]),t._v(" "),o("span",{staticClass:"text-dark"},[t._v("(\n                    "+t._s(e.is_verify?"驗證成功":"尚未完成信箱驗證")+"\n                    )")])]):t._e()]):e.nickname?o("div",[o("p",{staticClass:"mb-0"},[t._v("組員：")]),t._v(" "),o("p",{staticClass:"mb-0"},[o("a",{staticClass:"link-primary",attrs:{target:"_blank",href:"/users/"+e.user_id}},[t._v("\n                    "+t._s(e.nickname)+" / "+t._s(e.postition_name)+"\n                  ")]),t._v(" "),o("span",{staticClass:"text-dark"},[t._v("(\n                    "+t._s(e.is_verify?"驗證成功":"尚未完成信箱驗證")+"\n                    )")])])]):o("div",[o("p",{staticClass:"mb-0"},[t._v("尚未註冊 F2E 系統的組員：")]),t._v(" "),o("p",{staticClass:"mb-0"},[t._v("\n                  "+t._s(e.email)+"\n                ")])])])}))],2):t._e()])])],1),t._v(" "),o("div",{staticClass:"tab-pane fade pt-5",class:{"show active":!t.info.team_competition},attrs:{id:"profile",role:"tabpanel","aria-labelledby":"profile-tab"}},[o("div",{staticClass:"mt-5"},[o("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(e){var n=e.invalid;return[o("form",{on:{submit:function(e){return e.preventDefault(),t.editUserInfo.apply(null,arguments)}}},[o("ValidationProvider",{attrs:{rules:"max:150"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[o("div",{staticClass:"mb-4"},[o("label",{staticClass:"form-label",attrs:{for:"description"}},[t._v("個人簡介（限制 150 字）")]),t._v(" "),o("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.user.description,expression:"user.description",modifiers:{trim:!0}}],staticClass:"form-control",class:{"is-invalid":n[0]},attrs:{id:"description",name:"個人簡介",rows:"3"},domProps:{value:t.user.description},on:{input:function(e){e.target.composing||t.$set(t.user,"description",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),o("span",{staticClass:"invalid-feedback"},[t._v(t._s(n[0]))])])]}}],null,!0)}),t._v(" "),o("ValidationProvider",{attrs:{rules:{regex:new RegExp("(?:(?:http|https)://)?(?:www.)?facebook.com/\\w*")}},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[o("div",{staticClass:"mb-4"},[o("label",{staticClass:"form-label",attrs:{for:"fb_link"}},[t._v("Facebook 個人連結")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.user.facebook_url,expression:"user.facebook_url",modifiers:{trim:!0}}],staticClass:"form-control",class:{"is-invalid":n[0]},attrs:{id:"fb_link",name:"Facebook 個人連結",type:"text",placeholder:"https://www.facebook.com/"},domProps:{value:t.user.facebook_url},on:{input:function(e){e.target.composing||t.$set(t.user,"facebook_url",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),o("span",{staticClass:"invalid-feedback"},[t._v(t._s(n[0]))])])]}}],null,!0)}),t._v(" "),o("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:n}},[t._v("\n              更新資訊\n            ")])],1)]}}])})],1)]),t._v(" "),o("div",{staticClass:"tab-pane fade",attrs:{id:"resetPassword",role:"tabpanel","aria-labelledby":"reset_password-tab"}},[o("ValidationObserver",{ref:"observer",scopedSlots:t._u([{key:"default",fn:function(e){var n=e.invalid;return[o("form",{ref:"form",on:{submit:function(e){return e.preventDefault(),t.editPassword.apply(null,arguments)}}},[o("ValidationProvider",{attrs:{rules:"password"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[o("div",{staticClass:"mb-4 pt-5"},[o("label",{staticClass:"form-label",attrs:{for:"old_password"}},[t._v("舊密碼")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.reset.old_password,expression:"reset.old_password",modifiers:{trim:!0}}],staticClass:"form-control",class:{"is-invalid":n[0]},attrs:{id:"old_password",name:"舊密碼",type:"password"},domProps:{value:t.reset.old_password},on:{input:function(e){e.target.composing||t.$set(t.reset,"old_password",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),o("span",{staticClass:"invalid-feedback"},[t._v(t._s(n[0]))])])]}}],null,!0)}),t._v(" "),o("ValidationProvider",{attrs:{rules:"password",vid:"confirmation"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[o("div",{staticClass:"mb-4"},[o("label",{staticClass:"form-label",attrs:{for:"password"}},[t._v("新密碼")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.reset.new_password,expression:"reset.new_password",modifiers:{trim:!0}}],staticClass:"form-control",class:{"is-invalid":n[0]},attrs:{id:"password",name:"密碼",type:"password"},domProps:{value:t.reset.new_password},on:{input:function(e){e.target.composing||t.$set(t.reset,"new_password",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),o("span",{staticClass:"invalid-feedback"},[t._v(t._s(n[0]))])])]}}],null,!0)}),t._v(" "),o("ValidationProvider",{attrs:{rules:"required|confirmed:confirmation"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[o("div",{staticClass:"mb-4"},[o("label",{staticClass:"form-label",attrs:{for:"confirm_password"}},[t._v("確認新密碼")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.reset.confirm_new_password,expression:"reset.confirm_new_password",modifiers:{trim:!0}}],staticClass:"form-control",class:{"is-invalid":n[0]},attrs:{id:"confirm_password",name:"確認密碼",type:"password"},domProps:{value:t.reset.confirm_new_password},on:{input:function(e){e.target.composing||t.$set(t.reset,"confirm_new_password",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),o("span",{staticClass:"invalid-feedback"},[t._v(t._s(n[0]))])])]}}],null,!0)}),t._v(" "),o("button",{staticClass:"btn btn-primary",attrs:{disabled:n}},[t._v("\n            更新密碼\n          ")])],1)]}}])})],1)])],1)}),[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("li",{staticClass:"nav-item",attrs:{role:"presentation"}},[o("button",{staticClass:"nav-link",attrs:{id:"resetPassword-tab","data-bs-toggle":"tab","data-bs-target":"#resetPassword",type:"button",role:"tab","aria-controls":"resetPassword","aria-selected":"false"}},[t._v("\n        變更密碼\n      ")])])}],!1,null,null,null);e.default=component.exports;installComponents(component,{Alert:o(278).default})}}]);