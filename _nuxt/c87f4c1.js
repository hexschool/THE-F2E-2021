(window.webpackJsonp=window.webpackJsonp||[]).push([[38,5,12,13],{278:function(t,e,n){"use strict";n.r(e);n(55);var r={name:"Alert",props:{message:{default:function(){return{}},type:Object}},data:function(){return{messages:[]}},watch:{message:function(){this.message.content&&this.addAlert()}},methods:{addAlert:function(){var t=this.message,style=t.style,e=t.icon,content=t.content;this.messages.push({style:style,icon:e,content:content}),this.removeAlert()},removeAlert:function(){var t=this;setTimeout((function(){t.messages.shift()}),6e3)}}},o=n(36),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.messages,(function(e,r){return n("div",{key:r,staticClass:"alert mb-6 my-2",class:"alert-"+e.style,attrs:{role:"alert"}},[n("p",{staticClass:"mb-0"},[n("i",{staticClass:"pe-1 fas",class:e.icon}),t._v(t._s(e.content))])])})),0)}),[],!1,null,null,null);e.default=component.exports},279:function(t,e,n){t.exports=n.p+"img/week1.1822666.png"},280:function(t,e,n){t.exports=n.p+"img/week2.3ba5070.png"},281:function(t,e,n){t.exports=n.p+"img/week3.4b175ab.png"},282:function(t,e,n){t.exports=n.p+"img/week4.71c10bb.png"},283:function(t,e,n){var content=n(286);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(45).default)("7efe9a53",content,!0,{sourceMap:!1})},285:function(t,e,n){"use strict";n(283)},286:function(t,e,n){var r=n(44)(!1);r.push([t.i,'.avatar[data-v-2592f4a9]{font-family:"Lato",sans-serif;width:128px;height:128px;display:block;position:relative;transition:border .15s ease-in}.avatar .edit-avatar[data-v-2592f4a9]{background:var(--bs-white);width:40px;height:40px;border-radius:50%;right:0;display:flex;align-items:center;justify-content:center;text-decoration:none;cursor:pointer}.avatar .edit-avatar[data-v-2592f4a9]:hover{background:var(--bs-gray-200)}.avatar img[data-v-2592f4a9]{-o-object-fit:cover;object-fit:cover;border-radius:50%}.list-group-item[data-v-2592f4a9]{background-color:transparent;border:0}.list-group-item.nuxt-link-exact-active[data-v-2592f4a9],.list-group-item[data-v-2592f4a9]:hover{color:var(--bs-dark);background-color:var(--bs-gray-300)}.bg-gray-200[data-v-2592f4a9]{background-color:var(--bs-gray-200)}',""]),t.exports=r},287:function(t,e,n){var content=n(294);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(45).default)("307f440e",content,!0,{sourceMap:!1})},289:function(t,e,n){"use strict";n.r(e);n(17),n(37),n(94),n(9),n(55);var r={name:"Sidebar",props:{info:{default:function(){return{}},type:Object}},data:function(){return{defaultImg:"",imageSrc:"",user:{avatar:"",individual_competition:{name:""}},msg:""}},computed:{defaultImage:function(){var t,e;return"個人組/前端工程師"===(null===(t=this.info.individual_competition)||void 0===t?void 0:t.name)?n(203):"個人組/UI設計師"===(null===(e=this.info.individual_competition)||void 0===e?void 0:e.name)?n(204):n(205)}},watch:{info:{handler:function(){this.user.avatar="",this.user.avatar=this.info.avatar},deep:!0}},methods:{editAvatar:function(){var t=this,e=document.querySelector("input[type=file]").files[0],n=new FileReader;n.onload=function(e){var n=e.target.result.split(",")[1];if(n.length<1048576){t.$nuxt.$loading.start();t.$axios.post("/v1/users/info/avatar",{avatar:n}).then((function(e){t.user.avatar=e.data.avatar_url,t.msg={style:"success",icon:"fa-check-circle",content:"已更新成功！頭貼將於四小時內至一日內更新"},t.$emit("alert",t.msg),setTimeout((function(){window.location.reload()}),2e3)})).catch((function(e){t.msg={style:"danger",icon:"fa-exclamation-triangle",content:e.response.data.message||"更新失敗！"},t.$emit("alert",t.msg)})).finally((function(){t.$nuxt.$loading.finish()}))}else alert("圖片大小超過限制，圖片限制為 1 MB。")},n.onerror=function(t){alert(t)},n.readAsDataURL(e)}}},o=(n(285),n(36)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-md-4 mb-5 mb-md-0"},[n("div",{staticClass:"bg-light py-6 px-6"},[n("div",{staticClass:"avatar mb-2 mx-auto"},[t._m(0),t._v(" "),n("input",{staticStyle:{visibility:"hidden",height:"0px",display:"block"},attrs:{id:"edit-avatar",type:"file",accept:".png,.jpg,.jpeg"},on:{change:t.editAvatar}}),t._v(" "),n("img",{staticClass:"w-100 h-100 d-block",attrs:{src:t.user.avatar||t.defaultImage,alt:"個人頭貼"}})]),t._v(" "),n("div",{staticClass:"text-center"},[n("small",{staticClass:"text-danger"},[t._v("圖片限制檔案大小為 1 MB")]),t._v(" "),n("p",{staticClass:"fw-bold mb-1"},[t._v(t._s(t.info.nickname))]),t._v(" "),n("p",{staticClass:"mb-2"},[t._v(t._s(t.info.email))]),t._v(" "),t.info.individual_competition?n("p",{staticClass:"d-inline-block bg-white py-1 px-3 mb-2"},[t._v("\n        "+t._s(t.info.individual_competition.name.replace("/","｜"))+"\n      ")]):t._e(),t._v(" "),t.info.team_competition?n("p",{staticClass:"d-inline-block bg-white py-1 px-3 mb-2"},[t._v("\n        "+t._s(t.info.team_competition.name.replace("/","｜"))+"\n      ")]):t._e(),t._v(" "),t.info.medal_name?n("p",[n("img",{staticClass:"pe-1",attrs:{src:t.info.medal_image_url,alt:"徽章"}}),t._v("\n        "+t._s(t.info.medal_name)+"\n      ")]):t._e(),t._v(" "),n("hr")]),t._v(" "),n("div",{staticClass:"list-group mb-5 mt-5 bg-gray-200 p-4 rounded-0"},[n("nuxt-link",{staticClass:"list-group-item list-group-item-action p-4",attrs:{to:"/users/prepare"}},[n("i",{staticClass:"fas fa-grin"}),t._v(" 賽前準備")]),t._v(" "),n("nuxt-link",{staticClass:"list-group-item list-group-item-action p-4",attrs:{to:"/users"}},[n("i",{staticClass:"fas fa-edit"}),t._v(" 編輯個人資料")]),t._v(" "),n("nuxt-link",{staticClass:"list-group-item list-group-item-action p-4",attrs:{to:"/users/record"}},[n("i",{staticClass:"fas fa-file-alt"}),t._v(" 投稿紀錄\n      ")])],1),t._v(" "),n("div",{staticClass:"d-grid"},[n("nuxt-link",{staticClass:"btn btn-primary",class:{disabled:!t.info.user_id},attrs:{to:"/users/"+t.info.user_id,target:"_blank"}},[t._v("查看個人公開頁面")])],1)])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"edit-avatar position-absolute",attrs:{for:"edit-avatar"}},[e("i",{staticClass:"fas fa-pencil-alt text-dark"})])}],!1,null,"2592f4a9",null);e.default=component.exports},293:function(t,e,n){"use strict";n(287)},294:function(t,e,n){var r=n(44)(!1);r.push([t.i,".scrollBar[data-v-d798a2d6]::-webkit-scrollbar{display:none}",""]),t.exports=r},296:function(t,e,n){"use strict";n.r(e);n(202),n(46),n(38);var r={name:"Card",props:{worksList:{type:Array,default:function(){return[]}},userType:{type:Number,default:0},colNum:{type:Number,default:4}},data:function(){return{authStatus:!1}},created:function(){this.$cookies.get("t_sInR5cCI6IkpXVCJ_token")&&(this.authStatus=!0)},mounted:function(){[].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]')).map((function(t){return new bootstrap.Popover(t)}))},methods:{renderName:function(t){return 1===t?"UI Design":2===t?"Frontend":3===t?"Team-UI":4===t?"Team-Frontend":"發生系統錯誤"},popperName:function(t){return 1===t?"UI 設計":2===t?"前端工程":3===t?"團體組 UI 設計":4===t?"團體組前端工程":"發生系統錯誤"},defaultImg:function(t){return 1===t?n(279):2===t?n(280):3===t?n(281):4===t?n(282):void 0},defaultAvaterImg:function(t){return n(1===t?204:2===t?203:205)},onlineName:function(t){return 1===t||3===t?"線上標示文件":2===t||4===t?"線上觀看連結":"發生系統錯誤"}}},o=(n(293),n(36)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row"},t._l(t.worksList,(function(e){return n("div",{key:e.id,class:"col-lg-"+t.colNum+" col-md-6 mb-4"},[n("div",{staticClass:"card h-100 px-4 py-3"},[n("div",{staticClass:"card-header mb-2 d-flex justify-content-between"},[n("p",{staticClass:"mb-2 border-start border-3 ps-1",class:{"border-warning":1===e.works_types_id,"border-info":2===e.works_types_id,"border-primary":3===e.works_types_id||4===e.works_types_id},attrs:{"data-bs-placement":"top","data-bs-toggle":"popover","data-bs-trigger":"hover focus","data-bs-content":t.popperName(e.works_types_id),tabindex:"0"}},[t._v("\n          "+t._s(t.renderName(e.works_types_id))+"\n        ")]),t._v(" "),n("p",{staticClass:"mb-2"},[t._v("Week"+t._s(e.stage_id))])]),t._v(" "),n("div",{staticClass:"card-body d-flex flex-column"},[n("div",[n("nuxt-link",{staticClass:"d-flex align-items-center mb-2 text-decoration-none link-dark",attrs:{to:"/users/"+e.user_id,target:"_blank"}},[n("img",{staticClass:"rounded-circle",attrs:{src:e.avatar||t.defaultAvaterImg(e.works_types_id),width:"32",height:"32"}}),t._v(" "),1!==e.works_types_id||2!==e.works_types_id?n("p",{staticClass:"mb-0 mx-3 text-truncate"},[t._v(t._s(e.nickname))]):n("p",{staticClass:"mb-0 mx-3"},[t._v(t._s(e.nickname))])]),t._v(" "),n("nuxt-link",{staticClass:"h-100",attrs:{to:"/users/"+e.user_id,target:"_blank"}},[t._l(e.images,(function(e,r){return[e.is_cover?n("img",{key:"img"+r,staticClass:"img-fluid mb-2",attrs:{src:e.image_url}}):t._e()]})),t._v(" "),e.images.length?t._e():n("img",{staticClass:"img-fluid mb-2",attrs:{src:t.defaultImg(e.stage_id)}})],2)],1),t._v(" "),n("div",{staticClass:"d-flex flex-column",class:{"mt-auto":e.tags.length,"h-100":!e.tags.length}},[n("div",{class:{"mb-auto":!e.tags.length}},[n("div",{staticClass:"mb-2"},[t.authStatus?n("small",{staticClass:"mb-1 d-block"}):t._e(),t._v(" "),n("small",{staticClass:"me-4"},[t._v("\n                "+t._s(e.upvotes)+" 人喜歡\n                "),1===e.works_types_id?n("span",[t._v("｜ "+t._s(e.uses||0)+" 人採用")]):t._e()])]),t._v(" "),n("div",{staticClass:"mb-2 pb-2 d-flex overflow-auto scrollBar",class:{"border-bottom":e.tags.length}},t._l(e.tags,(function(e){return n("div",{key:"tag"+e.id,staticClass:"me-1",attrs:{href:"#"}},[n("span",{staticClass:"badge rounded-pill bg-light text-dark"},[t._v(t._s(e.name))])])})),0)]),t._v(" "),n("div",{staticClass:"d-grid gap-2"},[n("a",{staticClass:"btn btn-primary",class:e.online_url?"":"disabled",attrs:{href:e.online_url,target:"_blank"}},[t._v(t._s(t.onlineName(e.works_types_id)))]),t._v(" "),n("a",{staticClass:"btn btn-primary",class:e.file_url?"":"disabled btn-muted",attrs:{href:e.file_url,target:"_blank"}},[t._v("原始檔")])])])])])])})),0)}),[],!1,null,"d798a2d6",null);e.default=component.exports},426:function(t,e,n){"use strict";n.r(e);var r=n(289),o=n(296),l=n(278),c={name:"UserLikes",components:{Sidebar:r.default,Card:o.default,Alert:l.default},middleware:"routerAuth",meta:{requiresAuth:!0,close:!0},data:function(){return{user:{},worksList:[],msg:{},pagination:{total_works:0,total_page:0}}},mounted:function(){var t=this;this.$nextTick((function(){t.getUserInfo(),t.getWorksList()}))},methods:{getUserInfo:function(){var t=this;this.$axios.get("/v1/users/info").then((function(e){t.user=e.data.user_info})).catch((function(e){t.msg={style:"danger",icon:"fa-exclamation-triangle",content:e.response.data.message||"更新失敗！"}}))},getWorksList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n="/v1/users/works/upvotes?page=".concat(e);this.$axios.get(n).then((function(e){t.worksList=e.data.works_list,t.pagination=e.data.pagination})).catch((function(e){t.msg={style:"danger",icon:"fa-exclamation-triangle",content:e.response.data.message||"更新失敗！"}}))},isUpvotes:function(t){var e=this,n=t.id,r="post";t.status&&(r="delete"),this.$axios[r]("/v1/works/".concat(n,"/upvote")).then((function(){e.getWorksList()})).catch((function(t){e.msg={style:"danger",icon:"fa-exclamation-triangle",content:t.response.data.message||"更新失敗！"}}))}}},d=n(36),component=Object(d.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container py-5"},[n("div",{staticClass:"row justify-content-center my-md-7"},[n("Sidebar",{attrs:{info:t.user},on:{edit:t.getUserInfo}}),t._v(" "),n("div",{staticClass:"col-md-6"},[n("Alert",{attrs:{message:t.msg}}),t._v(" "),t.worksList.length?[n("h1",{staticClass:"fs-4 text-black mb-5"},[t._v("喜歡的投稿")]),t._v(" "),t.worksList.length?n("Card",{attrs:{"works-list":t.worksList,"col-num":6},on:{isUpvotes:t.isUpvotes}}):t._e()]:[n("p",[t._v("目前沒有投稿")])],t._v(" "),n("div",{staticClass:"d-flex justify-content-center"},[n("Paginate",{attrs:{"page-count":t.pagination.total_page,"click-handler":t.getWorksList,"prev-text":"&laquo;","next-text":"&raquo;","container-class":"pagination","page-class":"page-item","page-link-class":"page-link","prev-link-class":"page-link","next-link-class":"page-link"}})],1)],2)],1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Alert:n(278).default})}}]);