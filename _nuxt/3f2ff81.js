(window.webpackJsonp=window.webpackJsonp||[]).push([[31,5],{278:function(e,t,r){"use strict";r.r(t);r(55);var n={name:"Alert",props:{message:{default:function(){return{}},type:Object}},data:function(){return{messages:[]}},watch:{message:function(){this.message.content&&this.addAlert()}},methods:{addAlert:function(){var e=this.message,style=e.style,t=e.icon,content=e.content;this.messages.push({style:style,icon:t,content:content}),this.removeAlert()},removeAlert:function(){var e=this;setTimeout((function(){e.messages.shift()}),6e3)}}},o=r(36),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",e._l(e.messages,(function(t,n){return r("div",{key:n,staticClass:"alert mb-6 my-2",class:"alert-"+t.style,attrs:{role:"alert"}},[r("p",{staticClass:"mb-0"},[r("i",{staticClass:"pe-1 fas",class:t.icon}),e._v(e._s(t.content))])])})),0)}),[],!1,null,null,null);t.default=component.exports},284:function(e,t,r){e.exports=r.p+"img/login-img.9b26552.png"},330:function(e,t,r){var content=r(355);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(45).default)("eb1c7b78",content,!0,{sourceMap:!1})},354:function(e,t,r){"use strict";r(330)},355:function(e,t,r){var n=r(44)(!1);n.push([e.i,".bg-signup{background-image:url(https://firebasestorage.googleapis.com/v0/b/hexschool-api.appspot.com/o/blog%2F2021%2F09%2F09%2FF2E-2021-og.png?alt=media&token=04bf41b4-1d3c-4f90-bec5-a5567ccf1fa3);background-size:cover;background-position:50%;background-repeat:no-repeat;background-color:hsla(0,0%,100%,.8);background-blend-mode:overlay}",""]),e.exports=n},419:function(e,t,r){"use strict";r.r(t);var n=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"col-md-5 d-md-block d-none",staticStyle:{height:"calc(78vh)"}},[t("img",{staticClass:"img-fluid h-100 w-100",staticStyle:{"object-fit":"cover"},attrs:{src:r(284),alt:"Login"}})])}],o=r(6),l=(r(56),r(74)),m=r(278),c={name:"Signup",components:{ValidationObserver:l.a,ValidationProvider:l.b,Alert:m.default},middleware:"routerAuth",meta:{close:!0},asyncData:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,o,l,m,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.$axios,n=e.error,t.prev=1,"/v1/dropdowns/signup-info",t.next=5,r.get("/v1/dropdowns/signup-info");case 5:return o=t.sent,t.abrupt("return",{individual_competitions:o.data.individual_competitions,team_competition_positions:o.data.team_competition_positions});case 9:t.prev=9,t.t0=t.catch(1),n({statusCode:(null===(l=t.t0.response)||void 0===l?void 0:l.status)||500,message:(null===(m=t.t0.response)||void 0===m?void 0:m.data.message)||{},statusText:(null===(c=t.t0.response)||void 0===c?void 0:c.statusText)||"伺服器發生錯誤。"});case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},data:function(){return{user:{account:"",password:"",nickname:""},confirmation:"",group:"individual",group_id:1,position_id:1,team_name:"",is_leader:!0,memberone_email:"",membertwo_email:"",memberthree_email:"",leader_email:"",message:{nickname:"",teamname:""},loading:!1,msg:{}}},methods:{signup:function(){var e=this;if("individual"===this.group)this.user.competition={individual:{group_id:this.group_id}};else if(this.is_leader){var t=[this.memberone_email];this.membertwo_email&&t.push(this.membertwo_email),this.memberthree_email&&t.push(this.memberthree_email),this.user.competition={team:{position_id:this.position_id,name:this.team_name,member_emails:t}}}else this.user.competition={team:{position_id:this.position_id,leader_email:this.leader_email}};this.$axios.post("/v1/users/register",this.user).then((function(t){e.$router.push("/signup/message"),e.msg={style:"success",icon:"fa-check-circle",content:"報名成功！"}})).catch((function(t){e.msg={style:"danger",icon:"fa-exclamation-striangle",content:t.response.data.message||"報名失敗！"}}))},checkNickname:function(){var e=this;this.$axios.post("/v1/users/check/nickname",{nickname:this.user.nickname}).then((function(){e.message.nickname=""})).catch((function(t){e.message.nickname=t.response.data.message}))},checkTeamname:function(){var e=this;this.$axios.post("/v1/users/check/teamname",{teamname:this.team_name}).then((function(){e.message.teamname=""})).catch((function(t){e.message.teamname=t.response.data.message}))}}},d=(r(354),r(36)),component=Object(d.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"bg-signup d-flex align-items-center"},[r("div",{staticClass:"container py-5"},[r("div",{staticClass:"row justify-content-center"},[r("div",{staticClass:"col-lg-8 col-10"},[r("Alert",{attrs:{message:e.msg}})],1)]),e._v(" "),r("div",{staticClass:"row justify-content-center g-0"},[e._m(0),e._v(" "),r("div",{staticClass:"col-md-5 bg-white px-6 py-7",staticStyle:{height:"calc(78vh)","overflow-y":"scroll"}},[r("h1",{staticClass:"fs-2 mb-5"},[e._v("報名")]),e._v(" "),r("ValidationObserver",{scopedSlots:e._u([{key:"default",fn:function(t){var n=t.invalid;return[r("form",{on:{submit:function(t){return t.preventDefault(),e.signup.apply(null,arguments)}}},[r("ValidationProvider",{attrs:{rules:"required|email"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("div",{staticClass:"mb-4"},[r("label",{staticClass:"form-label",attrs:{for:"account"}},[e._v("帳號（Email）*")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.user.account,expression:"user.account",modifiers:{trim:!0}}],staticClass:"form-control",class:{"is-invalid":n[0]},attrs:{id:"account",name:"帳號",type:"email",placeholder:"name@example.com"},domProps:{value:e.user.account},on:{input:function(t){t.target.composing||e.$set(e.user,"account",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),r("span",{staticClass:"invalid-feedback"},[e._v(e._s(n[0]))])])]}}],null,!0)}),e._v(" "),r("ValidationProvider",{attrs:{rules:"password",vid:"confirmation"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("div",{staticClass:"mb-4"},[r("label",{staticClass:"form-label",attrs:{for:"password"}},[e._v("密碼*")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.user.password,expression:"user.password",modifiers:{trim:!0}}],staticClass:"form-control",class:{"is-invalid":n[0]},attrs:{id:"password",name:"密碼",type:"password"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),r("span",{staticClass:"invalid-feedback"},[e._v(e._s(n[0]))])])]}}],null,!0)}),e._v(" "),r("ValidationProvider",{attrs:{rules:"required|confirmed:confirmation"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("div",{staticClass:"mb-4"},[r("label",{staticClass:"form-label",attrs:{for:"confirm_password"}},[e._v("確認密碼*")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.confirmation,expression:"confirmation",modifiers:{trim:!0}}],staticClass:"form-control",class:{"is-invalid":n[0]},attrs:{id:"confirm_password",name:"確認密碼",type:"password"},domProps:{value:e.confirmation},on:{input:function(t){t.target.composing||(e.confirmation=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),r("span",{staticClass:"invalid-feedback"},[e._v(e._s(n[0]))])])]}}],null,!0)}),e._v(" "),r("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("div",{staticClass:"mb-4"},[r("label",{staticClass:"form-label",attrs:{for:"name"}},[e._v("暱稱*")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.user.nickname,expression:"user.nickname",modifiers:{trim:!0}}],staticClass:"form-control",class:{"is-invalid":n[0]||e.message.nickname},attrs:{id:"name",name:"暱稱",type:"text"},domProps:{value:e.user.nickname},on:{blur:[e.checkNickname,function(t){return e.$forceUpdate()}],input:function(t){t.target.composing||e.$set(e.user,"nickname",t.target.value.trim())}}}),e._v(" "),r("span",{staticClass:"invalid-feedback"},[e._v(e._s(n[0]||e.message.nickname))])])]}}],null,!0)}),e._v(" "),r("div",{staticClass:"mb-4"},[r("p",[e._v("\n                選擇組別*"),r("small",{staticClass:"text-danger ps-2"},[e._v("選擇後則不可改變")])]),e._v(" "),r("div",{staticClass:"form-check"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.group,expression:"group"}],staticClass:"form-check-input",attrs:{id:"individual",value:"individual",type:"radio",name:"group"},domProps:{checked:e._q(e.group,"individual")},on:{change:function(t){e.group="individual"}}}),e._v(" "),r("label",{staticClass:"form-check-label",attrs:{for:"individual"}},[e._v("\n                  個人組\n                ")])]),e._v(" "),r("div",{staticClass:"form-check"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.group,expression:"group"}],staticClass:"form-check-input",attrs:{id:"team",value:"team",type:"radio",name:"group"},domProps:{checked:e._q(e.group,"team")},on:{change:function(t){e.group="team"}}}),e._v(" "),r("label",{staticClass:"form-check-label",attrs:{for:"team"}},[e._v(" 團體組 ")])])]),e._v(" "),"individual"===e.group?[r("div",{staticClass:"mb-4"},[r("p",[e._v("選擇個人組別*")]),e._v(" "),e._l(e.individual_competitions,(function(t){return[r("div",{key:t.id,staticClass:"form-check"},[r("input",{directives:[{name:"model",rawName:"v-model.number",value:e.group_id,expression:"group_id",modifiers:{number:!0}}],staticClass:"form-check-input",attrs:{id:"UI設計師"===t.name?"individual_ui":"individual_frontend",type:"radio",name:"individual"},domProps:{value:t.id,checked:e._q(e.group_id,e._n(t.id))},on:{change:function(r){e.group_id=e._n(t.id)}}}),e._v(" "),r("label",{staticClass:"form-check-label",attrs:{for:"UI設計師"===t.name?"individual_ui":"individual_frontend"}},[e._v("\n                      "+e._s(t.name)+"\n                    ")])])]}))],2)]:[r("div",{staticClass:"mb-4"},[r("p",[e._v("\n                  選擇團體身份*\n                  "),r("small",{staticClass:"text-danger ps-2"},[e._v("建議組合為一個 UI 設計師一個前端工程師")])]),e._v(" "),e._l(e.team_competition_positions,(function(t){return[r("div",{key:t.id,staticClass:"form-check"},[r("input",{directives:[{name:"model",rawName:"v-model.number",value:e.position_id,expression:"position_id",modifiers:{number:!0}}],staticClass:"form-check-input",attrs:{id:t.name,type:"radio",name:"team"},domProps:{value:t.id,checked:e._q(e.position_id,e._n(t.id))},on:{change:function(r){e.position_id=e._n(t.id)}}}),e._v(" "),r("label",{staticClass:"form-check-label",attrs:{for:t.name}},[e._v("\n                      "+e._s(t.name)+"\n                    ")])])]}))],2),e._v(" "),r("div",{staticClass:"mb-4"},[r("p",[e._v("選擇團體角色*")]),e._v(" "),r("div",{staticClass:"form-check"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.is_leader,expression:"is_leader"}],staticClass:"form-check-input",attrs:{id:"team_leader",type:"radio",name:"team_identity"},domProps:{value:!0,checked:e._q(e.is_leader,!0)},on:{change:function(t){e.is_leader=!0}}}),e._v(" "),r("label",{staticClass:"form-check-label",attrs:{for:"team_leader"}},[e._v("我要當組長")])]),e._v(" "),r("div",{staticClass:"form-check"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.is_leader,expression:"is_leader"}],staticClass:"form-check-input",attrs:{id:"team_member",type:"radio",name:"team_identity"},domProps:{value:!1,checked:e._q(e.is_leader,!1)},on:{change:function(t){e.is_leader=!1}}}),e._v(" "),r("label",{staticClass:"form-check-label",attrs:{for:"team_member"}},[e._v("我要當組員")])])]),e._v(" "),e.is_leader?[r("ValidationProvider",{attrs:{rules:"required|max:10"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("div",{staticClass:"mb-4"},[r("label",{staticClass:"form-label",attrs:{for:"team_name"}},[e._v("團隊名稱*"),r("small",{staticClass:"text-danger"},[e._v("團隊名稱不能修改")])]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.team_name,expression:"team_name",modifiers:{trim:!0}}],staticClass:"form-control",class:{"is-invalid":n[0]||e.message.teamname},attrs:{id:"team_name",name:"團隊名稱",type:"text"},domProps:{value:e.team_name},on:{blur:[e.checkTeamname,function(t){return e.$forceUpdate()}],input:function(t){t.target.composing||(e.team_name=t.target.value.trim())}}}),e._v(" "),r("span",{staticClass:"invalid-feedback"},[e._v(e._s(n[0]||e.message.teamname))])])]}}],null,!0)}),e._v(" "),r("ValidationProvider",{attrs:{rules:"required|email"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("div",{staticClass:"mb-4"},[r("label",{staticClass:"form-label",attrs:{for:"member_mail_1"}},[e._v("組員一信箱*")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.memberone_email,expression:"memberone_email",modifiers:{trim:!0}}],staticClass:"form-control",class:{"is-invalid":n[0]},attrs:{id:"member_mail_1",name:"組員一信箱",type:"email",placeholder:"name@example.com"},domProps:{value:e.memberone_email},on:{input:function(t){t.target.composing||(e.memberone_email=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),r("span",{staticClass:"invalid-feedback"},[e._v(e._s(n[0]))])])]}}],null,!0)}),e._v(" "),r("ValidationProvider",{attrs:{rules:"email"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("div",{staticClass:"mb-4"},[r("label",{staticClass:"form-label",attrs:{for:"member_mail_2"}},[e._v("組員二信箱")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.membertwo_email,expression:"membertwo_email",modifiers:{trim:!0}}],staticClass:"form-control",class:{"is-invalid":n[0]},attrs:{id:"member_mail_2",name:"組員二信箱",type:"email",placeholder:"name@example.com"},domProps:{value:e.membertwo_email},on:{input:function(t){t.target.composing||(e.membertwo_email=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),r("span",{staticClass:"invalid-feedback"},[e._v(e._s(n[0]))])])]}}],null,!0)}),e._v(" "),r("ValidationProvider",{attrs:{rules:"email"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("div",{staticClass:"mb-4"},[r("label",{staticClass:"form-label",attrs:{for:"member_mail_3"}},[e._v("組員三信箱")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.memberthree_email,expression:"memberthree_email",modifiers:{trim:!0}}],staticClass:"form-control",class:{"is-invalid":n[0]},attrs:{id:"member_mail_3",name:"組員三信箱",type:"email",placeholder:"name@example.com"},domProps:{value:e.memberthree_email},on:{input:function(t){t.target.composing||(e.memberthree_email=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),r("span",{staticClass:"invalid-feedback"},[e._v(e._s(n[0]))])])]}}],null,!0)})]:[r("ValidationProvider",{attrs:{rules:"required|email"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("div",{staticClass:"mb-4"},[r("label",{staticClass:"form-label",attrs:{for:"leader_mail"}},[e._v("組長信箱*")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.leader_email,expression:"leader_email",modifiers:{trim:!0}}],staticClass:"form-control",class:{"is-invalid":n[0]},attrs:{id:"leader_mail",name:"組長信箱",type:"email",placeholder:"name@example.com"},domProps:{value:e.leader_email},on:{input:function(t){t.target.composing||(e.leader_email=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),r("span",{staticClass:"invalid-feedback"},[e._v(e._s(n[0]))])])]}}],null,!0)})]],e._v(" "),r("div",{staticClass:"d-grid"},[r("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:n}},[e._v("\n                報名\n              ")])]),e._v(" "),r("div",{staticClass:"d-flex justify-content-end py-3"},[r("p",{staticClass:"mb-0 text-muted"},[e._v("已報名？")]),e._v(" "),r("nuxt-link",{staticClass:"link-primary text-decoration-none",attrs:{to:"/login"}},[e._v("前往登入")])],1)],2)]}}])})],1)])])])}),n,!1,null,null,null);t.default=component.exports;installComponents(component,{Alert:r(278).default})}}]);